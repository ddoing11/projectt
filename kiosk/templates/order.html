{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë©”ë‰´ ì£¼ë¬¸</title>
  <script src="{% static 'js/voice_socket_main.js' %}"></script>
</head>
<body>
  <h1>ğŸ“ ì£¼ë¬¸ í˜ì´ì§€</h1>
  <div id="menu-list">
    <!-- ë©”ë‰´ ëª©ë¡ì´ ì—¬ê¸°ì— ì¶œë ¥ë¨ -->
  </div>

  <script>
    // âœ… í˜ì´ì§€ ë¡œë”© ì™„ë£Œ í›„ ì„œë²„ì— ìƒíƒœ ë³µì› ìš”ì²­
    document.addEventListener("DOMContentLoaded", () => {
      if (localStorage.getItem("continueRecognition") === "true") {
        localStorage.removeItem("continueRecognition");
        console.log("ğŸ” order ì§„ì… í›„ ì„œë²„ì— ìƒíƒœ ìš”ì²­");
        if (typeof socket !== "undefined" && socket.readyState === WebSocket.OPEN) {
          socket.send("resume_from_menu");
        } else {
          // WebSocketì´ ì•„ì§ ì—°ê²°ë˜ì§€ ì•Šì•˜ì„ ê²½ìš° ëŒ€ê¸° í›„ ì „ì†¡
          const retryInterval = setInterval(() => {
            if (typeof socket !== "undefined" && socket.readyState === WebSocket.OPEN) {
              socket.send("resume_from_menu");
              clearInterval(retryInterval);
            }
          }, 100);
        }
      }
    });
  </script>

</body>
</html>
